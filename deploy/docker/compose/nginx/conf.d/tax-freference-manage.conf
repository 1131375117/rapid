server {

    listen       8080;

    # add_header Content-Security-Policy "default-src 'self' 'unsafe-inline'; img-src 'self' data:";
    # add_header X-Content-Type-Options "nosniff";
    # add_header X-XSS-Protection "1";

    root /opt/web/manage;
    index index.html;

    location / {
        try_files $uri $uri/ @router;
        index index.html;
    }

    location @router {
        rewrite ^.*$ /index.html last;
    }

    location ^~ /api {
        index  index.html;
        proxy_set_header Host      $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_pass http://172.16.122.17:18080/api;
    }
}